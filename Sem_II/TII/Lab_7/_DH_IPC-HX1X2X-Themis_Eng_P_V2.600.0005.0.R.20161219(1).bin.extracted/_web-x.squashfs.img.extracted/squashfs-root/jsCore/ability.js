!function(a){define(["jsCore/rpc"],function(require,b,c){function d(b){var c=this;I("NetApp","getNetInterfaces",arguments[1]).done(function(d){if(a.isArray(d))switch(b){case"3G":c.resolve(!!a.grep(d,function(a){return"3G"===a.Name&&-1===a.Type.indexOf("TD-LTE")&&-1===a.Type.indexOf("FDD-LTE")}).length);break;case"4G":c.resolve(!!a.grep(d,function(a){return-1!==a.Type.indexOf("TD-LTE")||-1!==a.Type.indexOf("FDD-LTE")}).length);break;case"WIFI":c.resolve(!!a.grep(d,function(a){return"Wireless"===a.Type&&"eth2"===a.Name}).length);break;default:c.resolve(!1)}else c.resolve(!1)}).fail(function(){c.resolve(!1)})}function e(a){var b=this;I("Alarm","getAlarmCaps",arguments[1]).done(function(c){if(c)switch(a){case"AlarmPir":b.resolve(c.AlarmPir);break;case"Flash":b.resolve(c.Flash);break;default:b.resolve(!1)}else b.resolve(!1)}).fail(function(){b.resolve(!1)})}function f(){var b=this;I("MagicBox","getDeviceType",arguments[1]).done(function(c){b.resolve("string"===a.type(c)?c:"")}).fail(function(){b.resolve("")})}function g(){var a=this;I("OSDManager","getCustomCaps",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function h(){var a=this;I("MagicBox","getSerialNo",arguments[1]).done(a.resolve).fail(function(){a.resolve("")})}function i(){var b=this;I("MagicBox","getDeviceClass",arguments[1]).done(function(c){b.resolve("string"===a.type(c)?c:"")}).fail(function(){b.resolve("")})}function j(b){var c=this,d=M.indexOf(b);I("MagicBox","getProductDefinition",arguments[1],[M]).done(function(b){c.resolve(a.isArray(b)&&b[d].result&&b[d].params?b[d].params.definition:null)}).fail(function(){c.resolve(null)})}function k(){var a=this;I("VideoProcessManager","getCaps",arguments[1],["LDC"]).done(function(b){a.resolve(b.Support)}).fail(function(){a.resolve(!1)})}function l(){var a=this;I("Alarm","getInSlots",arguments[1]).done(a.resolve).fail(function(){a.resolve(0)})}function m(){var a=this;I("Alarm","getOutSlots",arguments[1]).done(a.resolve).fail(function(){a.resolve(0)})}function n(){var a=this;I("DevVideoInput","getCollect",arguments[1]).done(a.resolve).fail(function(){a.resolve(0)})}function o(){var a=this;I("DevVideoInput","getCaps",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function p(){var a=this;I("DevVideoInput","getCapsEx",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function q(){var a=this;I("WideViewControl","getCaps",arguments[1],[0,"WideViewControl"]).done(a.resolve).fail(function(){a.resolve(null)})}function r(){var a=this;I("Security","getEncryptInfo",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function s(a){var b=this;I("DevVideoInput","getCapsEx",arguments[1]).done(function(c){return c&&c.ImageStabilization&&c.ImageStabilization.Type?"OcxStabilization"===a?b.resolve(!!(4&c.ImageStabilization.Type)):"OpticsStabilization"===a?b.resolve(!!(2&c.ImageStabilization.Type)):"ElecStabilization"===a?b.resolve(!!(1&c.ImageStabilization.Type)):void 0:b.resolve(!1)}).fail(function(){b.resolve(!1)})}function t(){var a=this;I("DevAudioInput","getCollect",arguments[1]).done(a.resolve).fail(function(){a.resolve(0)})}function u(){var a=this;I("DevAudioInput","getCaps",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function v(){var a=this;I("DevAudioOutput","getCaps",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function w(){var a=this;I("DevAudioDetect","getCaps",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function x(){var a=this;I("DevVideoDetect","getCaps",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function y(){var a=this;I("DevAudioOutput","getCollect",arguments[1]).done(a.resolve).fail(function(){a.resolve(0)})}function z(){var a=this;I("DevVideoAnalyse","getCaps",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function A(){var a=this;I("RecordManager","getCaps",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function B(){var a=this;I("PTZ","getCurrentProtocolCaps",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function C(){var a=this;I("FaceBoard","getCaps",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function D(b){var c=this;I("ConfigManager","getConfig",arguments[1],["SmartEncode"]).done(function(d){d&&d[0]&&d[0].Enable?ability.get("VideoInputCapsEx").done(function(d){var e=!1;if(d&&d.VideoInConflict&&d.VideoInConflict.IsConflict){var f;"DSPConflict"===b?f="DSP":"ROIConflict"===b?f="ROI":"ExtraConflict"===b?f="Extra2":"RotateConflict"===b?f="Rotate_90":"TVOutConflict"===b&&(f="TVOut"),a.each(d.VideoInConflict.ConflictTable,function(b,c){return-1!==a.inArray("SmartEnc",c)&&-1!==a.inArray(f,c)?(e=!0,!1):void 0})}c.resolve(e)}):c.resolve(!1)}).fail(function(){c.resolve(!1)})}function E(a){var b=this;I("MagicBox","getProcessInfo",arguments[1]).done(function(c){b.resolve(-1!==c.toUpperCase().indexOf(a))}).fail(function(){b.resolve(!1)})}function F(){var a=this;I("MagicBox","getProcessInfo",arguments[1]).done(a.resolve).fail(function(){a.resolve("")})}function G(){var a=this;I("ConfigManager","getConfig",arguments[1],["VideoStandard"]).done(a.resolve).fail(function(){a.resolve("")})}function H(){var a=this;I("EventManager","getCaps",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function I(a,b,c,d){var e=a+"."+b+(d?d.toString():""),f=N[e];return(c||!f)&&(f=N[e]=J[a][b].apply(J[a],d||[]).done(function(a){null==a&&delete N[e]}).fail(function(){delete N[e]})),f}var J=require("jsCore/rpc"),K={AlarmPir:e,Flash:e,"3G":d,WIFI:d,"4G":d,OcxStabilization:s,OpticsStabilization:s,ElecStabilization:s,LDC:k,S2:E,HI:E,A5S:E,DM36:E,DM38:E,DSPConflict:D,ROIConflict:D,ExtraConflict:D,RotateConflict:D,TVOutConflict:D},L={DeviceType:f,AlarmIn:l,AlarmOut:m,ChannelNum:n,SerialNo:h,AudioInputNum:t,AudioOutputNum:y,AudioInputCaps:u,AudioOutputCaps:v,AudioDetectCaps:w,VideoDetectCaps:x,EncryptInfo:r,DeviceClass:i,VideoStandard:G,WideViewControl:q,RecordCaps:A,VideoInputCaps:o,VideoInputCapsEx:p,OSDCustom:g,PTZCaps:B,ProcessInfo:F,IVSCaps:z,FaceBoardCaps:C,EventCaps:H},M=["HasPtz","IsPtzAlarm","VSP","MaxExtraStream","CameraSwitchComV","IsLocalStore","IEEE802_1X","VPN","SupportedWPS","CameraAttribute","PtzFunctionMenu","LightingControl","RainBrushControl","CifPFrameSize","AudioFileManager","AudioProperties","WirelessAlarm","GB28181","VolumeDetect","AnomalyDetect","MutationDetect","MajorVersion","MinorVersion","VendorAbbr","OEMVersion","Revision","TypeVersion","BuildDate","WebVersion","MaxPreRecordTime","PTZFunctionViaApp","IntelliTracker","VSPs","FontColour","FontBorder","FontSize","QueryDatabase","PtzManualMotionDetect","VideoAnalyse","VideoStandards","Languages","SnapshotInterval","IsGpsInfoOsd","PtzOperationStatus","Focus","Iris","RotateResolutionLimit","EncodingResolutionLimit","SpecVer","LensControl","LensControlMix","smallPtz","FireWarning","TemperatureDifference","PresetFocusROI","IntelligentFocus","Industry","SteadyLightControl","CSCMatrixSwitch","TrackPositionLimit","AroudWifiSearch"];a.each(M,function(a,b){L[b]=j}),c.exports={is:function(b,c){return a.Deferred(function(a){"function"==typeof K[b]&&K[b].call(a,b,c)}).promise()},get:function(b,c){return a.Deferred(function(a){"function"==typeof L[b]&&L[b].call(a,b,c)}).promise()},clear:function(){N={}}};var N={}})}(jQuery);